---
layout: 	blogpost
size:     s
title:  	"Installing and ricing a dual-boot Linux installation: part 2"
tags:   	design linux build-logs
excerpt:	|

colour:		"#0EC5E9"
---


- Trying to use BURG to customize the GRUB bootloader
  - Not sure about compatibility with Arch, but it's still in AUR, so I'm going to install it anyway and hope for the best
  - make backup of /boot/grub and /etc/grub.d


Start of actual ricing:
-----------------------

- Installing herbstluftwm to try
  - seems powerful, but even steeper learning curve than i3!
  - managed to start floating mode ("herbstclient floating") and worked out how to move/resize windows using the mouse, so at least it's "usable" now
  - following the tutorial:
    - installed dzen2 - great, now I have a panel
    - copied /etc/xdg/herbstluftwm/autostart to ~/.config/herbstluftwm/autostart
    - uncommented the hc detect_monitors and Mod4 line
    - reading through the file, learnt a few keybindings which help me to navigate hlwm (incl. Mod+tab to cycle frames, Mod+Backspace to cycle monitors, Mod+1..9 to change tags within the monitor, Mod+arrows to focus windows, Mod+r to remove... etc etc etc etc)
	- FIRST SCREENSHOT!
    - replaced "xsetroot" line with "feh --bg-scale $HOME/pictures/<...>" line
	- SECOND SCREENSHOT
    - happy with how hlwm is set up for now, let's set something else up!

- Created ~/dotfiles directory where I will keep all my configuration files. I symlink to them from the expected locations (e.g. ~/.config/herbstluftwm/autostart -> ~/dotfiles/herbstluftwm-autostart) so that I can use git to manage my rices better.
  - uncommented the ZSH_CUSTOM line from .zshrc (generated by .oh-my-zsh) to point at dotfiles



- Installing burg
  - Finally built it from AUR after installing a million more dependencies
  - burg-install /dev/sdc, burg-mkconfig -o /boot/burg/burg.cfg
  - Downloaded a custom theme from http://sworiginal.deviantart.com/art/Lightness-for-burg-181461810
  - update-burg along the way
  - after realising that it was starting on my TV, I got it working by changing the resolution (?)
  - working! But need to remove the MBRs from old hard drives
    - Will try this through Windows


- Customising hlwm
  - Adding to herbstluft autostart to generate an edited version of my wallpaper using ImageMagick after setting it
    - "convert -resize 1% -resize 10000% $WALLPAPER $HOME/.login-bg.png"
    - not working, as can't access home folder (obviously); need to work out how to give hlwm permission to copy the file to /etc/share/pixmaps.
  - Installed rofi, bind to a key in the autostart file
    - "hc keybind $Mod-Return spawn rofi -show run"
    - Now rofi starts with Super+Return, instead of just opening a terminal

- Installed Xmodmap to swap my super and alt keys (I have a cuustom Apple keyboard: so Ctrl = Ctrl, Option = Alt, Cmd = Super... but at firmware level, these are normally swapped around to work better with Windows).
    - Now switched rofi to use Super+Space to match Spotlight from my Mac; also, added a window-switching mode on Super+Shift+Space. Moved previous occupants of those shortcuts to their Return equivalents
    - Changed close to Super+Q, and horizontal/vertical split to Super+V/H (and removed vim style navigation); also added Super+E to explode current frame, because that's a super useful operation

- installed screenfetch for a glamour screenshot, of course!
- installed numlockx and added as greeter-setup-script to LightDM.conf as per https://wiki.archlinux.org/index.php/LightDM#NumLock_on_by_default

- installed some powerline fonts and switched to agnoster theme - added font to termite config file.


- replaced panel code in hlwm autostart with "hc spawn yabar"
  - also added "hc spawn compton" for simple window compositing features; will customise this properly later
- OK, the lack of Unicode support from my fonts is starting to cause problems now
  - installed "ttf-inconsolata", let's see how this goes
    - seems to have also changed my terminal font... which is nice
  - switched yabar font to noto-fonts-emoji, but the non-emoji glyphs are weird.
    - because yabar supports Pango, I can use this to switch fonts on the fly (I think). So I should be able to use Noto Emoji to display any emoji I need, and switch to another font for normal text rendering.
    - installed tangerine from (https://github.com/syythe/tangerine).
    - manually copied it to /usr/share/fonts; ran mkfontscale/mkfontdir
    - added font lines to /etc/X11/xorg.conf.d/xorg.conf
    - had to rename font-family inside the tangerine.bdf font file to tangerine2, as it conflicted with another font called tangerine on my system.
    - however, it's a bitmap font, and it doesn't scale nicely, so might have to look for an alternative TTF font.
- Added "hc pad 0 32" to add padding to top of monitor for bar



Openbox
------

- Got a bit sick of tiling WMs, so installed OpenBox
- Installed obconf to configure, installed artwiz-fonts and using lime for everything
- very quickly got to a point where I can use OB, so that's nice - need to now map rofi to Super+Space so I can launch apps easier
  - <keybind key="A-space">
    <action name="Execute">
      <command>rofi -show run -modi run</command>
    </action>
  </keybind>
  - Changed this to "-modi drun,run" - nicer, as it uses nice names for programs with desktop launches, and can stil access all programs with ctrl+tab
  - Also added: <command>rofi -show run -modi run,drun</command>
  - Had to export PATH in xprofile rather than my.zsh so that rofi has the exporte PATH variable
  - Created virtual desktop row on the ZXCVBNM row - Super+Z switches to desktop 1 ("Z"), Shift+Super+Z switches to desktop 1; etc.
    - Set Shift+Super+comma to toggle "Show on all desktops"
  - Openbox currently not respecting my xmodmap swap (along with all other GTK apps) so temporarily mapped rofi to Alt instead of Super
  - Also added hlwm-inspired shortcuts for reloading (A-S-r) and changing window (A-S-space) and quitting (A-q)
- Created a custom Openbox theme
  - Removed the window border (as I intend on using Super+left/right click to move/resize windows - or better yet, keyboard shortcuts)
- Have a wallpaper script which sets my wallpaper (see above section on customising hlwm) and generates a blurred version of the wallpaper for the lock screen - should copy to the correct location too, but currently doesn't.
  - Have a custom action in Nemo which lets me right-click an image and run this script on it.
 - Need to set up a system where the set-wallpaper script will also generate the "most common colours" from the wallpaper and use them to set the theme
- Downloaded i3lock and xautolock; wrote simple script for locking screen:
 - scrot /tmp/lock-prefilter.png
   convert /tmp/lock-prefilter.png -filter Point -resize 25% -resize 400% -set colorspace Gray -separate -average /tmp/lock.png
   i3lock -i /tmp/lock.png -ue
 - mapped to Super+L (just like Windows)
 - also added to .xinitrc: xautolock -time 1 -locker "/home/sam/scripts/lock-screen" &
- using Super+UDLR to move windows around (useful? Not sure)
- removed Alt+Tab to kill bad habits; need to use A-S-space for Rofi switching now (much more powerful)
- disabled srolling on desktop to change desktop, because that's annoying
  - also removed middle and right clicking the desktop, because they're not that useful anyway
- switched window-switching to Super+arrows, as moving with the keyboard isn't that useful.
- wallpaper script now also copies file to /mnt/data/.windows-wallpaper
  - found a PowerShell script to change wallpaper using PowerShell; copied to home folder and execute from CMD file in Start Menu
- Created .config/user-dirs.dirs to remap DESKTOP folder to my Windows desktop directory
- Reprogrammed keyboard firmware to swap Alt & Super back to the way they were originally - now I can remove the xmodmap mapping, which means I don't have to rely
on the dodgy GTK support of it to have consistent Alt/Super mapping.

- Wallpaper set script: added as a nemo-action, which runs sudo set-wallpaper-ob on the file
  - this copies a blurry version of the file to /usr/share/pixmaps/login-bg, which is shown as my LightDM wallpaper

- Created feh-browse script from the ArchWiki:https://wiki.archlinux.org/index.php/feh#File_Browser_Image_Launcher
  - Added flags "-B black --scale-down" to make it more like the Windows image viewer; made

- Installed "tamzen" font
- Created .config/fontconfig/fonts.conf (symlinked to dotfiles folder) and aliased monospace to tamzen
- Changed openbox config to also use tamzen

- symlinked dmenu to rofi

- Colours and themes
  - Install Moka as the basis for Arc Icon theme
  - Install Arc theme from AUR
    - Also installed the arc-dark Chrome theme
    - Using arc-dark toolbar colour (#2F343F) as menu title colour
        - Also changed primary Atom theme colour to match toolbar
    - Using the arc pane colour (#404552) as the background for Termite (e.g. main Nemo pane)
      - Want to change background of Atom editor to match this also
  - Installed lxappearance to configure GTK themes
    - Set default font to Tamzen 10

Steam
-----
- Installed steam-native from AUR
- worked out using LIBGL_DEBUG=verbose which libraries were not being loaded correctly
- wrote a little script to preload libraries
- Not sure if games are actually going to work at this point, but I guess we'll see

Todo
----
- emoji keyboard input (eg: https://github.com/salty-horse/ibus-uniemoji)
- autostart apps at login


Resources
=========
https://www.reddit.com/r/unixporn/comments/38ht3a/toggleable_status_info_using_conky_and/
http://herbstluftwm.org/tutorial.html#client
